CREATE TABLE administrator_activities (id SERIAL NOT NULL, administrator_id INT NOT NULL, ip_address VARCHAR(45) NOT NULL, login_time TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, last_action_time TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_2FE94BA54B09E92C ON administrator_activities (administrator_id);
CREATE TABLE administrators (id SERIAL NOT NULL, username VARCHAR(100) NOT NULL, real_name VARCHAR(100) NOT NULL, password VARCHAR(100) NOT NULL, login_token VARCHAR(32) NOT NULL, email VARCHAR(255) NOT NULL, superadmin BOOLEAN NOT NULL, multidomain_login_token VARCHAR(50) DEFAULT NULL, multidomain_login_token_expiration TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_73A716FF85E0677 ON administrators (username);
CREATE INDEX IDX_73A716FF85E0677 ON administrators (username);
CREATE TABLE administrator_grid_limits (administrator_id INT NOT NULL, grid_id VARCHAR(128) NOT NULL, "limit" INT NOT NULL, PRIMARY KEY(administrator_id, grid_id));
CREATE INDEX IDX_6FA77E4B09E92C ON administrator_grid_limits (administrator_id);
CREATE TABLE adverts (id SERIAL NOT NULL, domain_id INT NOT NULL, name TEXT NOT NULL, type TEXT DEFAULT NULL, code TEXT DEFAULT NULL, link TEXT DEFAULT NULL, position_name TEXT NOT NULL, hidden BOOLEAN NOT NULL, PRIMARY KEY(id));
CREATE TABLE articles (id SERIAL NOT NULL, domain_id INT NOT NULL, position INT NOT NULL, name TEXT NOT NULL, text TEXT DEFAULT NULL, seo_title TEXT DEFAULT NULL, seo_meta_description TEXT DEFAULT NULL, placement TEXT NOT NULL, PRIMARY KEY(id));
CREATE TABLE cart_items (id SERIAL NOT NULL, user_id INT DEFAULT NULL, product_id INT DEFAULT NULL, session_id VARCHAR(127) NOT NULL, quantity INT NOT NULL, watched_price NUMERIC(20, 6) DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_BEF48445A76ED395 ON cart_items (user_id);
CREATE INDEX IDX_BEF484454584665A ON cart_items (product_id);
CREATE TABLE categories (id SERIAL NOT NULL, parent_id INT DEFAULT NULL, heureka_cz_feed_category_id INT DEFAULT NULL, level INT NOT NULL, lft INT NOT NULL, rgt INT NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_3AF34668727ACA70 ON categories (parent_id);
CREATE INDEX IDX_3AF346684D25D0EA ON categories (heureka_cz_feed_category_id);
CREATE TABLE category_domains (category_id INT NOT NULL, domain_id INT NOT NULL, hidden BOOLEAN NOT NULL, visible BOOLEAN NOT NULL, PRIMARY KEY(category_id, domain_id));
CREATE INDEX IDX_4BA3FFE312469DE2 ON category_domains (category_id);
CREATE TABLE category_translations (id SERIAL NOT NULL, translatable_id INT NOT NULL, name VARCHAR(255) DEFAULT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_1C60F9152C2AC5D3 ON category_translations (translatable_id);
CREATE UNIQUE INDEX category_translations_uniq_trans ON category_translations (translatable_id, locale);
CREATE TABLE billing_addresses (id SERIAL NOT NULL, company_customer BOOLEAN NOT NULL, company_name VARCHAR(100) DEFAULT NULL, company_number VARCHAR(50) DEFAULT NULL, company_tax_number VARCHAR(50) DEFAULT NULL, street VARCHAR(100) DEFAULT NULL, city VARCHAR(100) DEFAULT NULL, postcode VARCHAR(30) DEFAULT NULL, telephone VARCHAR(30) DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE delivery_addresses (id SERIAL NOT NULL, company_name VARCHAR(100) DEFAULT NULL, contact_person VARCHAR(200) DEFAULT NULL, street VARCHAR(100) DEFAULT NULL, city VARCHAR(100) DEFAULT NULL, postcode VARCHAR(30) DEFAULT NULL, telephone VARCHAR(30) DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE users (id SERIAL NOT NULL, billing_address_id INT NOT NULL, delivery_address_id INT DEFAULT NULL, pricing_group_id INT NOT NULL, first_name VARCHAR(100) NOT NULL, last_name VARCHAR(100) NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(100) NOT NULL, created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, last_login TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, domain_id INT NOT NULL, reset_password_hash VARCHAR(50) DEFAULT NULL, reset_password_hash_valid_through TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_1483A5E979D0C0E4 ON users (billing_address_id);
CREATE UNIQUE INDEX UNIQ_1483A5E9EBF23851 ON users (delivery_address_id);
CREATE INDEX IDX_1483A5E9BE4A29AF ON users (pricing_group_id);
CREATE INDEX IDX_1483A5E9E7927C74 ON users (email);
CREATE UNIQUE INDEX email_domain ON users (email, domain_id);
CREATE TABLE feed_categories (id SERIAL NOT NULL, ext_id INT NOT NULL, name VARCHAR(100) NOT NULL, full_name TEXT NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_B5DE4A745D04BFAD ON feed_categories (ext_id);
CREATE TABLE mail_templates (id SERIAL NOT NULL, name VARCHAR(255) NOT NULL, domain_id INT NOT NULL, bcc_email VARCHAR(255) DEFAULT NULL, subject VARCHAR(255) DEFAULT NULL, body TEXT DEFAULT NULL, send_mail BOOLEAN NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX name_domain ON mail_templates (name, domain_id);
CREATE TABLE enabled_modules (name VARCHAR(100) NOT NULL, PRIMARY KEY(name));
CREATE TABLE order_items (id SERIAL NOT NULL, order_id INT NOT NULL, payment_id INT DEFAULT NULL, product_id INT DEFAULT NULL, transport_id INT DEFAULT NULL, name TEXT NOT NULL, price_without_vat NUMERIC(20, 6) NOT NULL, price_with_vat NUMERIC(20, 6) NOT NULL, vat_percent NUMERIC(20, 6) NOT NULL, quantity INT NOT NULL, unit_name VARCHAR(10) DEFAULT NULL, catnum VARCHAR(255) DEFAULT NULL, type VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_62809DB08D9F6D38 ON order_items (order_id);
CREATE INDEX IDX_62809DB04C3A3BB ON order_items (payment_id);
CREATE INDEX IDX_62809DB04584665A ON order_items (product_id);
CREATE INDEX IDX_62809DB09909C13F ON order_items (transport_id);
CREATE TABLE orders (id SERIAL NOT NULL, customer_id INT DEFAULT NULL, transport_id INT NOT NULL, payment_id INT NOT NULL, status_id INT NOT NULL, currency_id INT NOT NULL, administrator_id INT DEFAULT NULL, number VARCHAR(30) NOT NULL, created_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, total_price_with_vat NUMERIC(20, 6) NOT NULL, total_price_without_vat NUMERIC(20, 6) NOT NULL, total_product_price_with_vat NUMERIC(20, 6) NOT NULL, first_name VARCHAR(100) NOT NULL, last_name VARCHAR(100) NOT NULL, email VARCHAR(255) NOT NULL, telephone VARCHAR(30) NOT NULL, company_name VARCHAR(100) DEFAULT NULL, company_number VARCHAR(50) DEFAULT NULL, company_tax_number VARCHAR(50) DEFAULT NULL, street VARCHAR(100) NOT NULL, city VARCHAR(100) NOT NULL, postcode VARCHAR(30) NOT NULL, delivery_address_same_as_billing_address BOOLEAN NOT NULL, delivery_contact_person VARCHAR(200) NOT NULL, delivery_company_name VARCHAR(100) DEFAULT NULL, delivery_telephone VARCHAR(30) DEFAULT NULL, delivery_street VARCHAR(100) NOT NULL, delivery_city VARCHAR(100) NOT NULL, delivery_postcode VARCHAR(30) NOT NULL, note TEXT DEFAULT NULL, deleted BOOLEAN NOT NULL, domain_id INT NOT NULL, url_hash VARCHAR(50) NOT NULL, created_as_administrator_name TEXT DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_E52FFDEE96901F54 ON orders (number);
CREATE UNIQUE INDEX UNIQ_E52FFDEECFECAB00 ON orders (url_hash);
CREATE INDEX IDX_E52FFDEE9395C3F3 ON orders (customer_id);
CREATE INDEX IDX_E52FFDEE9909C13F ON orders (transport_id);
CREATE INDEX IDX_E52FFDEE4C3A3BB ON orders (payment_id);
CREATE INDEX IDX_E52FFDEE6BF700BD ON orders (status_id);
CREATE INDEX IDX_E52FFDEE38248176 ON orders (currency_id);
CREATE INDEX IDX_E52FFDEE4B09E92C ON orders (administrator_id);
CREATE TABLE order_number_sequences (id INT NOT NULL, number NUMERIC(10, 0) NOT NULL, PRIMARY KEY(id));
CREATE TABLE promo_codes (id SERIAL NOT NULL, code TEXT NOT NULL, percent NUMERIC(20, 4) NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_C84FDDB77153098 ON promo_codes (code);
CREATE TABLE order_statuses (id SERIAL NOT NULL, type INT NOT NULL, PRIMARY KEY(id));
CREATE TABLE order_status_translations (id SERIAL NOT NULL, translatable_id INT NOT NULL, name VARCHAR(255) DEFAULT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_C34FFA0A2C2AC5D3 ON order_status_translations (translatable_id);
CREATE UNIQUE INDEX order_status_translations_uniq_trans ON order_status_translations (translatable_id, locale);
CREATE TABLE payments (id SERIAL NOT NULL, vat_id INT NOT NULL, hidden BOOLEAN NOT NULL, deleted BOOLEAN NOT NULL, position INT NOT NULL, czk_rounding BOOLEAN NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_65D29B32B5B63A6B ON payments (vat_id);
CREATE TABLE payments_transports (payment_id INT NOT NULL, transport_id INT NOT NULL, PRIMARY KEY(payment_id, transport_id));
CREATE INDEX IDX_4F42DF3E4C3A3BB ON payments_transports (payment_id);
CREATE INDEX IDX_4F42DF3E9909C13F ON payments_transports (transport_id);
CREATE TABLE payment_domains (payment_id INT NOT NULL, domain_id INT NOT NULL, PRIMARY KEY(payment_id, domain_id));
CREATE INDEX IDX_9532B1774C3A3BB ON payment_domains (payment_id);
CREATE TABLE payment_prices (payment_id INT NOT NULL, currency_id INT NOT NULL, price NUMERIC(20, 6) NOT NULL, PRIMARY KEY(payment_id, currency_id));
CREATE INDEX IDX_C1F3F6CF4C3A3BB ON payment_prices (payment_id);
CREATE INDEX IDX_C1F3F6CF38248176 ON payment_prices (currency_id);
CREATE TABLE payment_translations (id SERIAL NOT NULL, translatable_id INT NOT NULL, name VARCHAR(255) DEFAULT NULL, description TEXT DEFAULT NULL, instructions TEXT DEFAULT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_A0476D9D2C2AC5D3 ON payment_translations (translatable_id);
CREATE UNIQUE INDEX payment_translations_uniq_trans ON payment_translations (translatable_id, locale);
CREATE TABLE currencies (id SERIAL NOT NULL, name VARCHAR(50) NOT NULL, code VARCHAR(3) NOT NULL, exchange_rate NUMERIC(20, 6) NOT NULL, PRIMARY KEY(id));
CREATE TABLE pricing_groups (id SERIAL NOT NULL, name TEXT NOT NULL, domain_id INT NOT NULL, coefficient NUMERIC(20, 4) NOT NULL, PRIMARY KEY(id));
CREATE TABLE vats (id SERIAL NOT NULL, replace_with_id INT DEFAULT NULL, name VARCHAR(50) NOT NULL, percent NUMERIC(20, 4) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_A45A1D3FBA57326F ON vats (replace_with_id);
CREATE TABLE product_accessories (product_id INT NOT NULL, accessory_product_id INT NOT NULL, position INT DEFAULT NULL, PRIMARY KEY(product_id, accessory_product_id));
CREATE INDEX IDX_8D25B85F4584665A ON product_accessories (product_id);
CREATE INDEX IDX_8D25B85F12AF3B76 ON product_accessories (accessory_product_id);
CREATE TABLE availabilities (id SERIAL NOT NULL, dispatch_time INT DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE availabilities_translations (id SERIAL NOT NULL, translatable_id INT NOT NULL, name VARCHAR(100) NOT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_80D708562C2AC5D3 ON availabilities_translations (translatable_id);
CREATE UNIQUE INDEX availabilities_translations_uniq_trans ON availabilities_translations (translatable_id, locale);
CREATE TABLE products_manual_bestselling (id SERIAL NOT NULL, product_id INT NOT NULL, category_id INT NOT NULL, domain_id INT NOT NULL, position INT NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_497E06E94584665A ON products_manual_bestselling (product_id);
CREATE INDEX IDX_497E06E912469DE2 ON products_manual_bestselling (category_id);
CREATE UNIQUE INDEX UNIQ_497E06E94584665A12469DE2115F0EE5 ON products_manual_bestselling (product_id, category_id, domain_id);
CREATE UNIQUE INDEX UNIQ_497E06E9462CE4F512469DE2115F0EE5 ON products_manual_bestselling (position, category_id, domain_id);
CREATE TABLE brands (id SERIAL NOT NULL, name VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE TABLE flags (id SERIAL NOT NULL, rgb_color VARCHAR(7) NOT NULL, PRIMARY KEY(id));
CREATE TABLE flags_translations (id SERIAL NOT NULL, translatable_id INT NOT NULL, name VARCHAR(100) NOT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_23D1BA1A2C2AC5D3 ON flags_translations (translatable_id);
CREATE UNIQUE INDEX flags_translations_uniq_trans ON flags_translations (translatable_id, locale);
CREATE TABLE parameter_titles (id SERIAL NOT NULL, PRIMARY KEY(id));
CREATE TABLE parameter_titles_translations (id SERIAL NOT NULL, translatable_id INT NOT NULL, name VARCHAR(100) DEFAULT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_16F42D262C2AC5D3 ON parameter_titles_translations (translatable_id);
CREATE UNIQUE INDEX parameter_titles_translations_uniq_trans ON parameter_titles_translations (translatable_id, locale);
CREATE TABLE parameter_values (id SERIAL NOT NULL, text VARCHAR(100) NOT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE TABLE product_parameter_values (product_id INT NOT NULL, parameter_id INT NOT NULL, value_id INT NOT NULL, PRIMARY KEY(product_id, parameter_id, value_id));
CREATE INDEX IDX_505522EB4584665A ON product_parameter_values (product_id);
CREATE INDEX IDX_505522EB7C56DBD6 ON product_parameter_values (parameter_id);
CREATE INDEX IDX_505522EBF920BBA2 ON product_parameter_values (value_id);
CREATE TABLE product_calculated_prices (product_id INT NOT NULL, pricing_group_id INT NOT NULL, price_with_vat NUMERIC(20, 6) DEFAULT NULL, PRIMARY KEY(product_id, pricing_group_id));
CREATE INDEX IDX_1BF1288D4584665A ON product_calculated_prices (product_id);
CREATE INDEX IDX_1BF1288DBE4A29AF ON product_calculated_prices (pricing_group_id);
CREATE TABLE product_manual_input_prices (product_id INT NOT NULL, pricing_group_id INT NOT NULL, input_price NUMERIC(20, 6) DEFAULT NULL, PRIMARY KEY(product_id, pricing_group_id));
CREATE INDEX IDX_6034D7F84584665A ON product_manual_input_prices (product_id);
CREATE INDEX IDX_6034D7F8BE4A29AF ON product_manual_input_prices (pricing_group_id);
CREATE TABLE products (id SERIAL NOT NULL, vat_id INT NOT NULL, unit_id INT NOT NULL, availability_id INT NOT NULL, out_of_stock_availability_id INT DEFAULT NULL, calculated_availability_id INT NOT NULL, brand_id INT DEFAULT NULL, main_variant_id INT DEFAULT NULL, catnum VARCHAR(100) DEFAULT NULL, catnum_tsvector TSVECTOR NOT NULL, partno VARCHAR(100) DEFAULT NULL, partno_tsvector TSVECTOR NOT NULL, ean VARCHAR(100) DEFAULT NULL, price NUMERIC(20, 6) NOT NULL, selling_from DATE DEFAULT NULL, selling_to DATE DEFAULT NULL, selling_denied BOOLEAN NOT NULL, calculated_selling_denied BOOLEAN NOT NULL, hidden BOOLEAN NOT NULL, calculated_hidden BOOLEAN NOT NULL, using_stock BOOLEAN NOT NULL, stock_quantity INT DEFAULT NULL, out_of_stock_action VARCHAR(255) DEFAULT NULL, recalculate_availability BOOLEAN DEFAULT 'true' NOT NULL, visible BOOLEAN NOT NULL, price_calculation_type VARCHAR(32) NOT NULL, recalculate_price BOOLEAN DEFAULT 'true' NOT NULL, recalculate_visibility BOOLEAN DEFAULT 'true' NOT NULL, variant_type VARCHAR(32) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_B3BA5A5AB5B63A6B ON products (vat_id);
CREATE INDEX IDX_B3BA5A5AF8BD700D ON products (unit_id);
CREATE INDEX IDX_B3BA5A5A61778466 ON products (availability_id);
CREATE INDEX IDX_B3BA5A5AF84E44BE ON products (out_of_stock_availability_id);
CREATE INDEX IDX_B3BA5A5A7674B48F ON products (calculated_availability_id);
CREATE INDEX IDX_B3BA5A5A44F5D008 ON products (brand_id);
CREATE INDEX IDX_B3BA5A5A391DDCC ON products (main_variant_id);
CREATE INDEX IDX_B3BA5A5A6326C1BC ON products (variant_type);
COMMENT ON COLUMN products.catnum_tsvector IS '(DC2Type:tsvector)';
COMMENT ON COLUMN products.partno_tsvector IS '(DC2Type:tsvector)';
CREATE TABLE product_flags (product_id INT NOT NULL, flag_id INT NOT NULL, PRIMARY KEY(product_id, flag_id));
CREATE INDEX IDX_AA593AE64584665A ON product_flags (product_id);
CREATE INDEX IDX_AA593AE6919FE4E5 ON product_flags (flag_id);
CREATE TABLE product_category_domains (product_id INT NOT NULL, category_id INT NOT NULL, domain_id INT NOT NULL, PRIMARY KEY(product_id, category_id, domain_id));
CREATE INDEX IDX_C52F9B1F4584665A ON product_category_domains (product_id);
CREATE INDEX IDX_C52F9B1F12469DE2 ON product_category_domains (category_id);
CREATE TABLE product_domains (product_id INT NOT NULL, domain_id INT NOT NULL, seo_title TEXT DEFAULT NULL, seo_meta_description TEXT DEFAULT NULL, description TEXT DEFAULT NULL, description_tsvector TSVECTOR NOT NULL, fulltext_tsvector TSVECTOR NOT NULL, heureka_cpc NUMERIC(16, 2) DEFAULT NULL, PRIMARY KEY(product_id, domain_id));
CREATE INDEX IDX_5DA2A42D4584665A ON product_domains (product_id);
COMMENT ON COLUMN product_domains.description_tsvector IS '(DC2Type:tsvector)';
COMMENT ON COLUMN product_domains.fulltext_tsvector IS '(DC2Type:tsvector)';
CREATE TABLE product_translations (id SERIAL NOT NULL, translatable_id INT NOT NULL, name VARCHAR(255) DEFAULT NULL, name_tsvector TSVECTOR NOT NULL, variant_alias VARCHAR(255) DEFAULT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_4B13F8EC2C2AC5D3 ON product_translations (translatable_id);
CREATE UNIQUE INDEX product_translations_uniq_trans ON product_translations (translatable_id, locale);
COMMENT ON COLUMN product_translations.name_tsvector IS '(DC2Type:tsvector)';
CREATE TABLE product_visibilities (product_id INT NOT NULL, pricing_group_id INT NOT NULL, domain_id INT NOT NULL, visible BOOLEAN NOT NULL, PRIMARY KEY(product_id, pricing_group_id, domain_id));
CREATE INDEX IDX_EE086D244584665A ON product_visibilities (product_id);
CREATE INDEX IDX_EE086D24BE4A29AF ON product_visibilities (pricing_group_id);
CREATE TABLE products_top (id SERIAL NOT NULL, product_id INT NOT NULL, domain_id INT NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_DA6BE6944584665A ON products_top (product_id);
CREATE INDEX IDX_DA6BE6944584665A115F0EE5 ON products_top (product_id, domain_id);
CREATE UNIQUE INDEX product_domain_unique ON products_top (product_id, domain_id);
CREATE TABLE units (id SERIAL NOT NULL, PRIMARY KEY(id));
CREATE TABLE units_translations (id SERIAL NOT NULL, translatable_id INT NOT NULL, name VARCHAR(10) NOT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_15C4C1DE2C2AC5D3 ON units_translations (translatable_id);
CREATE UNIQUE INDEX units_translations_uniq_trans ON units_translations (translatable_id, locale);
CREATE TABLE slider_items (id SERIAL NOT NULL, name TEXT NOT NULL, link TEXT NOT NULL, domain_id INT NOT NULL, position INT DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE transports (id SERIAL NOT NULL, vat_id INT NOT NULL, hidden BOOLEAN NOT NULL, deleted BOOLEAN NOT NULL, position INT NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_C7BE69E5B5B63A6B ON transports (vat_id);
CREATE TABLE transport_domains (transport_id INT NOT NULL, domain_id INT NOT NULL, PRIMARY KEY(transport_id, domain_id));
CREATE INDEX IDX_18AC7F6C9909C13F ON transport_domains (transport_id);
CREATE TABLE transport_prices (transport_id INT NOT NULL, currency_id INT NOT NULL, price NUMERIC(20, 6) NOT NULL, PRIMARY KEY(transport_id, currency_id));
CREATE INDEX IDX_573018D09909C13F ON transport_prices (transport_id);
CREATE INDEX IDX_573018D038248176 ON transport_prices (currency_id);
CREATE TABLE transport_translations (id SERIAL NOT NULL, translatable_id INT NOT NULL, name VARCHAR(255) DEFAULT NULL, description TEXT DEFAULT NULL, instructions TEXT DEFAULT NULL, locale VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_584521C72C2AC5D3 ON transport_translations (translatable_id);
CREATE UNIQUE INDEX transport_translations_uniq_trans ON transport_translations (translatable_id, locale);
CREATE TABLE persistent_references (reference_name VARCHAR(100) NOT NULL, entity_name TEXT NOT NULL, entity_id INT NOT NULL, PRIMARY KEY(reference_name));
CREATE TABLE images (id SERIAL NOT NULL, entity_name VARCHAR(100) NOT NULL, entity_id INT NOT NULL, type VARCHAR(100) DEFAULT NULL, extension VARCHAR(5) NOT NULL, position INT DEFAULT NULL, modified_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_E01FBE6A16EFC72D81257D5D8CDE5729 ON images (entity_name, entity_id, type);
CREATE TABLE friendly_urls (domain_id INT NOT NULL, slug TEXT NOT NULL, route_name VARCHAR(255) NOT NULL, entity_id INT NOT NULL, main BOOLEAN NOT NULL, PRIMARY KEY(domain_id, slug));
CREATE INDEX IDX_64EC05ABF3667F8381257D5D ON friendly_urls (route_name, entity_id);
CREATE TABLE setting_values (name VARCHAR(255) NOT NULL, domain_id INT NOT NULL, value TEXT DEFAULT NULL, type VARCHAR(7) NOT NULL, PRIMARY KEY(name, domain_id));
CREATE TABLE uploaded_files (id SERIAL NOT NULL, entity_name VARCHAR(100) NOT NULL, entity_id INT NOT NULL, extension VARCHAR(5) NOT NULL, modified_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_E60EFB516EFC72D81257D5D ON uploaded_files (entity_name, entity_id);
CREATE TABLE entity (id SERIAL NOT NULL, name TEXT NOT NULL, short VARCHAR(100) DEFAULT NULL, PRIMARY KEY(id));
ALTER TABLE administrator_activities ADD CONSTRAINT FK_2FE94BA54B09E92C FOREIGN KEY (administrator_id) REFERENCES administrators (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE administrator_grid_limits ADD CONSTRAINT FK_6FA77E4B09E92C FOREIGN KEY (administrator_id) REFERENCES administrators (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE cart_items ADD CONSTRAINT FK_BEF48445A76ED395 FOREIGN KEY (user_id) REFERENCES users (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE cart_items ADD CONSTRAINT FK_BEF484454584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE categories ADD CONSTRAINT FK_3AF34668727ACA70 FOREIGN KEY (parent_id) REFERENCES categories (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE categories ADD CONSTRAINT FK_3AF346684D25D0EA FOREIGN KEY (heureka_cz_feed_category_id) REFERENCES feed_categories (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE category_domains ADD CONSTRAINT FK_4BA3FFE312469DE2 FOREIGN KEY (category_id) REFERENCES categories (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE category_translations ADD CONSTRAINT FK_1C60F9152C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES categories (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE users ADD CONSTRAINT FK_1483A5E979D0C0E4 FOREIGN KEY (billing_address_id) REFERENCES billing_addresses (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE users ADD CONSTRAINT FK_1483A5E9EBF23851 FOREIGN KEY (delivery_address_id) REFERENCES delivery_addresses (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE users ADD CONSTRAINT FK_1483A5E9BE4A29AF FOREIGN KEY (pricing_group_id) REFERENCES pricing_groups (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE order_items ADD CONSTRAINT FK_62809DB08D9F6D38 FOREIGN KEY (order_id) REFERENCES orders (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE order_items ADD CONSTRAINT FK_62809DB04C3A3BB FOREIGN KEY (payment_id) REFERENCES payments (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE order_items ADD CONSTRAINT FK_62809DB04584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE order_items ADD CONSTRAINT FK_62809DB09909C13F FOREIGN KEY (transport_id) REFERENCES transports (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE orders ADD CONSTRAINT FK_E52FFDEE9395C3F3 FOREIGN KEY (customer_id) REFERENCES users (id) ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE orders ADD CONSTRAINT FK_E52FFDEE9909C13F FOREIGN KEY (transport_id) REFERENCES transports (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE orders ADD CONSTRAINT FK_E52FFDEE4C3A3BB FOREIGN KEY (payment_id) REFERENCES payments (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE orders ADD CONSTRAINT FK_E52FFDEE6BF700BD FOREIGN KEY (status_id) REFERENCES order_statuses (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE orders ADD CONSTRAINT FK_E52FFDEE38248176 FOREIGN KEY (currency_id) REFERENCES currencies (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE orders ADD CONSTRAINT FK_E52FFDEE4B09E92C FOREIGN KEY (administrator_id) REFERENCES administrators (id) ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE order_status_translations ADD CONSTRAINT FK_C34FFA0A2C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES order_statuses (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE payments ADD CONSTRAINT FK_65D29B32B5B63A6B FOREIGN KEY (vat_id) REFERENCES vats (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE payments_transports ADD CONSTRAINT FK_4F42DF3E4C3A3BB FOREIGN KEY (payment_id) REFERENCES payments (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE payments_transports ADD CONSTRAINT FK_4F42DF3E9909C13F FOREIGN KEY (transport_id) REFERENCES transports (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE payment_domains ADD CONSTRAINT FK_9532B1774C3A3BB FOREIGN KEY (payment_id) REFERENCES payments (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE payment_prices ADD CONSTRAINT FK_C1F3F6CF4C3A3BB FOREIGN KEY (payment_id) REFERENCES payments (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE payment_prices ADD CONSTRAINT FK_C1F3F6CF38248176 FOREIGN KEY (currency_id) REFERENCES currencies (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE payment_translations ADD CONSTRAINT FK_A0476D9D2C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES payments (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE vats ADD CONSTRAINT FK_A45A1D3FBA57326F FOREIGN KEY (replace_with_id) REFERENCES vats (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_accessories ADD CONSTRAINT FK_8D25B85F4584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_accessories ADD CONSTRAINT FK_8D25B85F12AF3B76 FOREIGN KEY (accessory_product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE availabilities_translations ADD CONSTRAINT FK_80D708562C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES availabilities (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products_manual_bestselling ADD CONSTRAINT FK_497E06E94584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products_manual_bestselling ADD CONSTRAINT FK_497E06E912469DE2 FOREIGN KEY (category_id) REFERENCES categories (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE flags_translations ADD CONSTRAINT FK_23D1BA1A2C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES flags (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE parameter_titles_translations ADD CONSTRAINT FK_16F42D262C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES parameter_titles (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_parameter_values ADD CONSTRAINT FK_505522EB4584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_parameter_values ADD CONSTRAINT FK_505522EB7C56DBD6 FOREIGN KEY (parameter_id) REFERENCES parameter_titles (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_parameter_values ADD CONSTRAINT FK_505522EBF920BBA2 FOREIGN KEY (value_id) REFERENCES parameter_values (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_calculated_prices ADD CONSTRAINT FK_1BF1288D4584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_calculated_prices ADD CONSTRAINT FK_1BF1288DBE4A29AF FOREIGN KEY (pricing_group_id) REFERENCES pricing_groups (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_manual_input_prices ADD CONSTRAINT FK_6034D7F84584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_manual_input_prices ADD CONSTRAINT FK_6034D7F8BE4A29AF FOREIGN KEY (pricing_group_id) REFERENCES pricing_groups (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products ADD CONSTRAINT FK_B3BA5A5AB5B63A6B FOREIGN KEY (vat_id) REFERENCES vats (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products ADD CONSTRAINT FK_B3BA5A5AF8BD700D FOREIGN KEY (unit_id) REFERENCES units (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products ADD CONSTRAINT FK_B3BA5A5A61778466 FOREIGN KEY (availability_id) REFERENCES availabilities (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products ADD CONSTRAINT FK_B3BA5A5AF84E44BE FOREIGN KEY (out_of_stock_availability_id) REFERENCES availabilities (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products ADD CONSTRAINT FK_B3BA5A5A7674B48F FOREIGN KEY (calculated_availability_id) REFERENCES availabilities (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products ADD CONSTRAINT FK_B3BA5A5A44F5D008 FOREIGN KEY (brand_id) REFERENCES brands (id) ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products ADD CONSTRAINT FK_B3BA5A5A391DDCC FOREIGN KEY (main_variant_id) REFERENCES products (id) ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_flags ADD CONSTRAINT FK_AA593AE64584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_flags ADD CONSTRAINT FK_AA593AE6919FE4E5 FOREIGN KEY (flag_id) REFERENCES flags (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_category_domains ADD CONSTRAINT FK_C52F9B1F4584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_category_domains ADD CONSTRAINT FK_C52F9B1F12469DE2 FOREIGN KEY (category_id) REFERENCES categories (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_domains ADD CONSTRAINT FK_5DA2A42D4584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_translations ADD CONSTRAINT FK_4B13F8EC2C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_visibilities ADD CONSTRAINT FK_EE086D244584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE product_visibilities ADD CONSTRAINT FK_EE086D24BE4A29AF FOREIGN KEY (pricing_group_id) REFERENCES pricing_groups (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE products_top ADD CONSTRAINT FK_DA6BE6944584665A FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE units_translations ADD CONSTRAINT FK_15C4C1DE2C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES units (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE transports ADD CONSTRAINT FK_C7BE69E5B5B63A6B FOREIGN KEY (vat_id) REFERENCES vats (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE transport_domains ADD CONSTRAINT FK_18AC7F6C9909C13F FOREIGN KEY (transport_id) REFERENCES transports (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE transport_prices ADD CONSTRAINT FK_573018D09909C13F FOREIGN KEY (transport_id) REFERENCES transports (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE transport_prices ADD CONSTRAINT FK_573018D038248176 FOREIGN KEY (currency_id) REFERENCES currencies (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE transport_translations ADD CONSTRAINT FK_584521C72C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES transports (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
